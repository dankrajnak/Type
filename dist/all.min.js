"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),Typewriter=function(){function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.03;_classCallCheck(this,e),this._texts=t,this._el=n,this.errorProbability=a,this._currentText=n.innerHTML,this._delaySequence=[],this._delaySequenceRunning=!1,this._lengthAfterDelay=0,this._play=!1,this._stopImmediately=!1,this._textIndex=0,this._textToType=this._texts[0].split(""),this._DEFAULT_TYPE_DELAY_BASE=150,this._DEFAULT_TYPE_DELAY_VARIANCE=50,this._DEFAULT_DELETE_DELAY_BASE=80,this._DEFAULT_DELETE_DELAY_VARIANCE=10,this._DEFAULT_PAUSE_AMOUNT=2e3,this._playParamaters}return _createClass(e,[{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._DEFAULT_PAUSE_AMOUNT,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._delay(function(){},e,t),this}},{key:"deleteAllCharacters",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._DEFAULT_DELETE_DELAY_BASE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._DEFAULT_DELETE_DELAY_VARIANCE,n=this._lengthAfterDelay,a=0;a<n;a++)this.deleteCharacter(e,t);return this}},{key:"deleteCharacter",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._DEFAULT_DELETE_DELAY_BASE,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._DEFAULT_DELETE_DELAY_VARIANCE;return this._lengthAfterDelay=Math.max(this._lengthAfterDelay-1,0),this._delay(function(){if(0==e._currentText.length)return!1;e._currentText=e._currentText.substr(0,e._currentText.length-1),e._displayCurrentText()},t,n),this}},{key:"deleteCharacters",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._DEFAULT_DELETE_DELAY_BASE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._DEFAULT_DELETE_DELAY_VARIANCE,a=0;a<e;a++)this.deleteCharacter(t,n);return this}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._DEFAULT_PAUSE_AMOUNT,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._DEFAULT_TYPE_DELAY_BASE,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._DEFAULT_TYPE_DELAY_VARIANCE,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this._DEFAULT_DELETE_DELAY_BASE,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this._DEFAULT_DELETE_DELAY_VARIANCE;return this._playParams={pause:e,pauseVariance:t,typeDelayBase:n,typeDelayVariance:a,deleteDelayBase:i,deleteDelayVariance:r},this._play=!0,this._delaySequenceRunning||this._executeNextDelay(),this}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._play=!1,e&&(this._stopImmediately=!0,this._delaySequenceRunning=!1),this}},{key:"typeCharacter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._DEFAULT_TYPE_DELAY_BASE,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._DEFAULT_TYPE_DELAY_VARIANCE;if(null==e){if(!(this._textToType.length>0))return!1;e=this._textToType.unshift()}if(this._lengthAfterDelay++,Math.random()<=this.errorProbability){var i=this._getMistakeCharacter(e);this._lengthAfterDelay++,this._delay(function(){t._currentText=t._currentText.concat(i),t._displayCurrentText()}),this.pause(200,100),this.deleteCharacters(1)}return this._delay(function(){t._currentText=t._currentText.concat(e),t._displayCurrentText()},n,a),this}},{key:"typeNextText",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._DEFAULT_TYPE_DELAY_BASE,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._DEFAULT_TYPE_DELAY_VARIANCE;return this._textToType=this._texts[this._textIndex].split(""),this._textIndex=(this._textIndex+1)%this._texts.length,this._textToType.forEach(function(a){e.typeCharacter(a,t,n)}),this}},{key:"_delay",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._delaySequence.push({function:e,delay:t+Math.random()*n-n/2}),this._delaySequenceRunning||this._executeNextDelay()}},{key:"_displayCurrentText",value:function(){this._el.innerHTML=this._currentText}},{key:"_executeNextDelay",value:function(){var e=this;if(this._stopImmediately)this._stopImmediately=!1;else if(this._delaySequenceRunning=!0,this._delaySequence.length>0){var t=this._delaySequence.shift();setTimeout(function(){t.function(),window.requestAnimationFrame(e._executeNextDelay())},t.delay)}else this._play?(this.typeNextText(this._playParams.typeDelayBase,this._playParams.typeDelayVariance),this.pause(this._playParams.pause,this._playParams.pauseVariance),this.deleteAllCharacters(this._playParams.deleteDelayBase,this._playParams.deleteDelayVariance),this.pause(this._playParams.pause,this._playParams.pauseVariance),this._executeNextDelay()):this._delaySequenceRunning=!1}},{key:"_getMistakeCharacter",value:function(e){var t=["qwertyuiop[","asdfghjkl;","zxcvbnm,"],n=e.toUpperCase()==e;if(-1!="abcdefghijklmnopqrstuvwxyz".indexOf(e.toLowerCase())){var a=n?.9:.1;if(Math.random()<=a)return n?e.toLowerCase():e.toUpperCase();for(var i=0;i<t.length;i++){var r=t[i].indexOf(e.toLowerCase());if(-1!=r)switch(r){case 0:return t[i][1];case t[i].length-1:return t[i].length-2;default:return Math.random()<=.5?t[i][r-1]:t[i][r+1]}}}for(var s=["1234567890-=","p[]\\","l;'","m,./"],h=["!@#$%^&*()_+","P{}|",'L:"',"M<>?"],o=0;o<h.length;o++){var l=h[o].indexOf(e);if(l-=-1){if(Math.random()<=.9)return s[o][l];switch(l){case 0:return h[o][1];case h[o].length-1:return h[o][h[o].length-2];default:return Math.random()<=.5?h[o][l-1]:h[o][l+1]}}}for(var u=0;u<s.length;u++){var d=h[u].indexOf(e);if(d-=-1){if(Math.random()<=.1)return h[u][d];switch(d){case 0:return h[u][1];case h[u].length-1:return h[u][h[u].length-2];default:return Math.random()<=.5?h[u][d-1]:h[u][d+1]}}}return e}},{key:"isTyping",get:function(){return this._delaySequenceRunning}},{key:"delaySequence",get:function(){var e=[];return this._delaySequence.forEach(function(t){return e.push(Object.assign({},t))}),e}}]),e}(),reStacks=["This my excavation and to-","day is Qumran","Everything that happens is from now on","This is pouring rain","This is paralyzed","I keep throwing it down, two","Hundred at a time","It's hard to find it when you knew it","When your money's gone","And you're drunk as hell","On your back with your racks as he stacks your load","In the back with the racks and he stacks your load","In the back with the racks and you're unstacking your load","I've been twisting to the sun","I needed to replace","And the fountain in the front yard is rusted out","All my love was down","In a frozen ground","There's a black crow sitting across from me","His wiry legs are crossed","He's dangling my keys, he even fakes a toss","Whatever could it be","That has brought me to this loss?","On your back with your racks as he stacks your load","In the back with the racks and he stacks your load","In the back with the racks and you're unstacking your load","This is not the sound of a new man","Or a crispy realization","It's the sound of me unlocking and you lift away","Your love will be","Safe with me."],crEEks=["Down along the creek","I remember something","Her, the heron hurried away","When first I breached that last Sunday","Low moon don the yellow road","I remember something","That leaving wasn't easing all that heaving in my vines","And as certain it is evening 'at is now is not the time","Toiling with your blood","I remember something","In B, un-rationed kissing on night second to last","Finding both you hands as second sun came past the glass","And oh, I knew it felt right","I had you in my grasp","Oh, then how we gonna cry?","Cause it once might not mean something?","Love, a second glance","It is not something that we need.","Honey, understand that I have been left here in the reeds","And all I'm trying to do is get my feet out from the crease","And I'll see you","Turn around, you're my A Team","Turn around now, you're my A Team","Goddamn, turn around now","You're my A Team."],oMeOLife=["Oh me! Oh life! of the questions of these recurring Of the endless trains of the faithless, of cities fill’d with the foolish","Of myself forever reproaching myself, (for who more foolish than I, and who more faithless?)","Of eyes that vainly crave the light, of the objects mean, of the struggle ever renew’d","Of the poor results of all, of the plodding and sordid crowds I see around me","Of the empty and useless years of the rest, with the rest me intertwined","The question, O me! so sad, recurring—What good amid these, O me, O life?","Answer.","That you are here","—that life exists and identity,","That the powerful play goes on, and you may contribute a verse."],typeWriter=new Typewriter(reStacks,document.getElementById("text"));typeWriter.play();